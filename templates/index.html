<!DOCTYPE html>
<html>
<head>
    <title>Cognitive Pipeline Hybrid 2.0</title>
</head>
<body>

<h2>Cognitive Pipeline Hybrid 2.0</h2>

<input type="file" id="doc">
<br><br>

<textarea id="doc_text" placeholder="Paste document text here"></textarea>
<br><br>

<textarea id="q" placeholder="Enter question here"></textarea>
<br><br>

<button onclick="analyze()">Analyze</button>

<pre id="out"></pre>

<script>
async function analyze() {
    console.log("Analyze clicked");

    const question = document.getElementById("q").value;
    const text = document.getElementById("doc_text").value;
    const fileInput = document.getElementById("doc");

    const formData = new FormData();
    formData.append("question", question);
    formData.append("text", text);

    if (fileInput.files.length > 0) {
        formData.append("file", fileInput.files[0]);
    }

    const res = await fetch("/analyze", {
        method: "POST",
        body: formData
    });

    const data = await res.json();
    document.getElementById("out").innerText =
        JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
